<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Olivia ğŸ’œ</title>
<style>
  :root{
    --bg1:#1b0b2e; --bg2:#2b0f45; --card:#ffffff12; --card2:#ffffff18;
    --text:#f7f1ff; --muted:#d7c7ff; --accent:#b47cff; --accent2:#ff6fb1;
    --shadow: 0 20px 60px rgba(0,0,0,.45);
    --radius:24px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background: radial-gradient(1200px 600px at 10% 10%, #3b1a63 0%, transparent 60%),
                radial-gradient(1000px 600px at 90% 15%, #6a1f6a 0%, transparent 55%),
                radial-gradient(900px 700px at 50% 100%, #1b234d 0%, transparent 60%),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    overflow-x:hidden;
  }
  a{color:inherit}
  #bgCanvas, #confettiCanvas{
    position:fixed; inset:0; width:100%; height:100%; pointer-events:none;
  }
  #confettiCanvas{display:none}
  .wrap{max-width:980px; margin:0 auto; padding:24px 16px 64px}
  .topbar{display:flex; gap:12px; justify-content:space-between; align-items:center; margin:10px 0 18px}
  .pill{
    display:inline-flex; align-items:center; gap:10px;
    padding:10px 12px; border-radius:999px;
    background:linear-gradient(180deg, var(--card2), var(--card));
    border:1px solid rgba(255,255,255,.14);
    box-shadow:0 10px 30px rgba(0,0,0,.25);
    backdrop-filter: blur(10px);
  }
  .pill small{color:var(--muted); opacity:.9}
  .btn{
    cursor:pointer; user-select:none;
    border:none; outline:none;
    padding:10px 14px; border-radius:999px;
    background:linear-gradient(180deg, rgba(180,124,255,.95), rgba(255,111,177,.9));
    color:#1a0426; font-weight:800;
    box-shadow:0 12px 30px rgba(180,124,255,.25);
    transition: transform .15s ease, filter .15s ease;
  }
  .btn:active{transform:scale(.98)}
  .btn.secondary{
    background:linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.10));
    color:var(--text);
    border:1px solid rgba(255,255,255,.18);
    box-shadow:none;
  }
  .hero{
    display:grid; gap:14px;
  }
  .headline{
    font-size: clamp(28px, 4.2vw, 44px);
    line-height:1.05; margin:0;
    letter-spacing:-0.02em;
  }
  .sub{
    margin:0; color:var(--muted); font-size:clamp(14px, 2.2vw, 16px);
    max-width: 60ch;
  }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
    border:1px solid rgba(255,255,255,.14);
    border-radius:var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(12px);
    overflow:hidden;
  }
  .grid{
    display:grid; grid-template-columns: 1.1fr .9fr; gap:14px;
  }
  @media (max-width: 860px){ .grid{grid-template-columns:1fr} }
  .photoFrame{
    position:relative;
    padding:18px;
  }
  .mainPhoto{
    width:100%;
    max-width: 360px;
    margin: 10px auto 0;
    aspect-ratio: 4/5;
    border-radius: 26px;
    overflow:hidden;
    position:relative;
    box-shadow: 0 18px 50px rgba(0,0,0,.45);
    border: 1px solid rgba(255,255,255,.18);
    background: rgba(0,0,0,.2);
  }
  .mainPhoto img{
    width:100%; height:100%; object-fit:contain; object-position:center; display:block;
    transform: none;
  }
  .tag{
    position:absolute; left:14px; top:14px;
    padding:8px 10px; border-radius:999px;
    background: rgba(0,0,0,.35);
    border:1px solid rgba(255,255,255,.18);
    color: rgba(255,255,255,.92);
    font-weight:700; font-size:12px;
    backdrop-filter: blur(8px);
  }
  .controls{
    padding:18px;
    display:flex; flex-direction:column; gap:14px;
  }
  .mini{
    display:grid; grid-template-columns: 1fr 1fr; gap:10px;
  }
  .mini .tile{
    padding:14px; border-radius:18px;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.14);
  }
  .tile h4{margin:0 0 6px; font-size:12px; color:rgba(255,255,255,.75); letter-spacing:.08em; text-transform:uppercase}
  .tile p{margin:0; font-size:16px; font-weight:800}
  .question{
    margin-top:4px;
    padding:16px;
    border-radius: 22px;
    background: linear-gradient(180deg, rgba(255,255,255,.11), rgba(255,255,255,.07));
    border:1px solid rgba(255,255,255,.14);
  }
  .qRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; position:relative}
  .yes, .no{
    padding:12px 18px; border-radius:999px; font-weight:900;
    border:none; cursor:pointer; user-select:none;
    transition: transform .15s ease;
  }
  .yes{background: linear-gradient(180deg, rgba(180,124,255,.95), rgba(255,111,177,.9)); color:#1a0426}
  .no{background: rgba(255,255,255,.14); color:var(--text); border:1px solid rgba(255,255,255,.20)}
  .no:active, .yes:active{transform:scale(.98)}
  .hint{margin:10px 0 0; color:rgba(255,255,255,.75); font-size:13px}
  .toast{
    position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
    padding:12px 14px; border-radius:14px;
    background: rgba(15, 6, 30, .72);
    border:1px solid rgba(255,255,255,.18);
    backdrop-filter: blur(10px);
    box-shadow:0 18px 60px rgba(0,0,0,.5);
    display:none; max-width:min(92vw,640px);
  }
  .toast strong{color:#fff}
  .gallery{
    padding:18px;
  }
  .galleryHead{display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap}
  .galleryHead h3{margin:0; font-size:18px}
  .galleryHead p{margin:0; color:var(--muted); font-size:13px}
  .carousel{
    margin-top:14px;
    border-radius: 22px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.22);
    position:relative;
  }
  .slides{
    display:flex;
    overflow:auto;
    scroll-snap-type:x mandatory;
    scroll-behavior:smooth;
    scrollbar-width:none;
  }
  .slides::-webkit-scrollbar{display:none}
  .slide{
    min-width:100%;
    aspect-ratio: 16/10;
    scroll-snap-align:center;
    position:relative;
  }
  .slide img{width:100%; height:100%; object-fit:contain; object-position:center; display:block;}
  .carBtns{
    position:absolute; inset:0;
    display:flex; align-items:center; justify-content:space-between;
    padding:12px;
    pointer-events:none;
  }
  .carBtns button{
    pointer-events:auto;
    width:42px; height:42px; border-radius:999px;
    border:1px solid rgba(255,255,255,.18);
    background: rgba(10, 4, 18, .42);
    color:#fff; font-size:18px; font-weight:900;
    cursor:pointer;
    backdrop-filter: blur(10px);
  }
  .thumbs{
    margin-top:10px;
    display:flex; gap:10px; overflow:auto; padding-bottom:6px;
  }
  .thumbs button{
    border:none; padding:0; background:none; cursor:pointer;
    flex:0 0 auto;
  }
  .thumb{
    width:64px; height:64px; border-radius:16px; overflow:hidden;
    border:1px solid rgba(255,255,255,.16);
    box-shadow:0 10px 22px rgba(0,0,0,.25);
    opacity:.75; transform: translateY(0);
    transition: opacity .15s ease, transform .15s ease;
  }
  .thumb img{width:100%; height:100%; object-fit:cover}
  .thumb.active{opacity:1; transform: translateY(-2px); border-color: rgba(255,255,255,.35)}
  .surprise{
    margin-top:14px;
    padding:18px;
    display:none;
  }
  .letter{
    margin-top:10px;
    padding:18px;
    border-radius:22px;
    background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.07));
    border:1px solid rgba(255,255,255,.14);
    position:relative;
    overflow:hidden;
  }
  .letter:before{
    content:"";
    position:absolute; inset:-80px;
    background: radial-gradient(circle at 20% 20%, rgba(255,111,177,.22), transparent 45%),
                radial-gradient(circle at 80% 30%, rgba(180,124,255,.22), transparent 50%);
    filter: blur(8px);
  }
  .letter > *{position:relative}
  .letter h2{margin:0 0 8px; font-size:20px}
  .letter p{margin:8px 0; color: rgba(255,255,255,.86); line-height:1.55}
  .sig{margin-top:10px; color:rgba(255,255,255,.92); font-weight:900}
  .secretRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  .chip{
    padding:10px 12px; border-radius:999px;
    background: rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.14);
    color: rgba(255,255,255,.9);
    font-weight:700;
    cursor:pointer;
  }
  .modal{
    position:fixed; inset:0; display:none; place-items:center;
    background: rgba(0,0,0,.55);
    padding:16px;
  }
  .modal .box{
    width:min(640px, 92vw);
    border-radius: 26px;
    background: linear-gradient(180deg, rgba(30,10,55,.96), rgba(15,6,30,.96));
    border:1px solid rgba(255,255,255,.16);
    box-shadow: var(--shadow);
    padding:18px;
    position:relative;
    overflow:hidden;
  }
  .modal .box:before{
    content:"";
    position:absolute; inset:-60px;
    background: radial-gradient(circle at 30% 20%, rgba(255,111,177,.35), transparent 55%),
                radial-gradient(circle at 70% 80%, rgba(180,124,255,.35), transparent 55%);
    filter: blur(14px);
    opacity:.9;
  }
  .modal .box > *{position:relative}
  .modal h2{margin:0 0 8px}
  .modal p{margin:8px 0; color: rgba(255,255,255,.86); line-height:1.55}
  .closeX{
    position:absolute; right:12px; top:12px;
    width:40px; height:40px; border-radius:999px;
    border:1px solid rgba(255,255,255,.16);
    background: rgba(255,255,255,.08);
    color:#fff; cursor:pointer;
  }
  .footerNote{margin-top:14px; color:rgba(255,255,255,.65); font-size:12px}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>
<canvas id="confettiCanvas"></canvas>

<div class="wrap">
  <div class="topbar">
    <div class="pill">
      <span style="font-size:16px">ğŸ’œ</span>
      <div>
        <div style="font-weight:900">Olivia</div>
        <small>Valentine invite</small>
      </div>
    </div>
    <div class="pill" style="gap:8px">
      <button id="musicBtn" class="btn secondary" type="button">â™« Music: Off</button>
      <button id="surpriseBtn" class="btn" type="button" style="display:none">Open Surprise âœ¨</button>
    </div>
  </div>

  <div class="hero">
    <h1 class="headline">Oliviaâ€¦ will you be my Valentine?</h1>
    <p class="sub">just a small way to show you how special you are. No pressureâ€¦ except the <b>No</b> button is a little shy.</p>
  </div>

  <div class="grid" style="margin-top:14px">
    <div class="card photoFrame">
      <div class="mainPhoto">
        <span class="tag">Us ğŸ’«</span>
        <img src="assets/img_1_9c5edf68bc.jpg" alt="Us"/>
      </div>
      <div class="footerNote">warning: Opening this may cause excessive smiling blushing and lots of kisses ğŸ˜‰</div>
    </div>

    <div class="card controls">
      <div class="mini">
        <div class="tile">
          <h4>When</h4>
          <p>February 14</p>
        </div>
        <div class="tile">
          <h4>Dress</h4>
          <p>Your favorite glow</p>
        </div>
      </div>

      <div class="question">
        <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap">
          <div>
            <div style="font-weight:900; font-size:16px">Quick questionâ€¦</div>
            <div style="color:rgba(255,255,255,.78); font-size:13px; margin-top:2px">Choose wisely ğŸ˜Œ</div>
          </div>
          <div class="pill" style="padding:8px 10px">
            <small id="attemptsText">Yes unlocks after 2 tries</small>
          </div>
        </div>

        <div class="qRow" id="qRow">
          <button class="yes" id="yesBtn" type="button">Yes ğŸ’–</button>
          <button class="no" id="noBtn" type="button">No (try to catch me)</button>
        </div>
        <div class="hint" id="hint">Click â€œYesâ€ onceâ€¦ itâ€™s gonna tease you.</div>
      </div>

      <div class="pill" style="justify-content:space-between">
        <small id="status">Status: waiting for your answer</small>
        <span style="opacity:.9">âœ¨</span>
      </div>
    </div>
  </div>

  <div class="card gallery" style="margin-top:14px">
    <div class="galleryHead">
      <div>
        <h3>Our little gallery</h3>
        <p>Swipe or use arrows. Tap thumbnails to jump.</p>
      </div>
      <div class="pill">
        <small id="slideLabel">1 / 6</small>
      </div>
    </div>

    <div class="carousel">
      <div class="slides" id="slides">
        <div class="slide"><img src="assets/img_2_9c5edf68bc.jpg" alt="photo 1"></div><div class="slide"><img src="assets/img_3_dec66a405e.jpg" alt="photo 2"></div><div class="slide"><img src="assets/img_4_77762869d4.jpg" alt="photo 3"></div><div class="slide"><img src="assets/img_5_8b8e93939c.jpg" alt="photo 4"></div><div class="slide"><img src="assets/img_6_2caadc8f20.jpg" alt="photo 5"></div><div class="slide"><img src="assets/img_7_bdb324a045.jpg" alt="photo 6"></div>
      </div>
      <div class="carBtns">
        <button type="button" id="prevBtn" aria-label="Previous">â€¹</button>
        <button type="button" id="nextBtn" aria-label="Next">â€º</button>
      </div>
    </div>

    <div class="thumbs" id="thumbs">
      <button type="button" data-i="0"><div class="thumb active"><img src="assets/img_8_9c5edf68bc.jpg" alt="thumb 1"></div></button><button type="button" data-i="1"><div class="thumb "><img src="assets/img_9_dec66a405e.jpg" alt="thumb 2"></div></button><button type="button" data-i="2"><div class="thumb "><img src="assets/img_10_77762869d4.jpg" alt="thumb 3"></div></button><button type="button" data-i="3"><div class="thumb "><img src="assets/img_11_8b8e93939c.jpg" alt="thumb 4"></div></button><button type="button" data-i="4"><div class="thumb "><img src="assets/img_12_2caadc8f20.jpg" alt="thumb 5"></div></button><button type="button" data-i="5"><div class="thumb "><img src="assets/img_13_bdb324a045.jpg" alt="thumb 6"></div></button>
    </div>
  </div>

  <div class="card surprise" id="surpriseSection">
    <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap">
      <div>
        <div style="font-weight:900; font-size:18px">Surprise unlocked ğŸ’œ</div>
        <div style="color:rgba(255,255,255,.78); font-size:13px; margin-top:2px">Open the letter + pick a vibe.</div>
      </div>
      <button class="btn" id="openLetterBtn" type="button">Open Letter ğŸ’Œ</button>
    </div>

    <div class="letter" id="letter" style="display:none">
      <h2>Hi Olivia,</h2>
      <p>Thank you for being you. I love how you show up with warmth, kindness, and that smile that makes everything feel lighter.</p>
      <p>On Valentineâ€™s Day I want to celebrate <b>us</b>â€”good food, a cute moment, and a memory weâ€™ll laugh about later.</p>
      <p>If youâ€™re downâ€¦ Iâ€™m all in.</p>
      <div class="sig">â€” Alex ğŸ’œ</div>

      <div class="secretRow">
        <button class="chip" type="button" data-msg="Dinner + dessert + a surprise ğŸ‘€">Pick the plan ğŸ½ï¸</button>
        <button class="chip" type="button" data-msg="Dress up and steal kisses in public ğŸ˜Œ">Pick the vibe âœ¨</button>
        <button class="chip" type="button" data-msg="Iâ€™m really lucky I met you.">Pick the truth ğŸ«¶</button>
        <button class="chip" type="button" data-msg="Okâ€¦ now you have to say yes ğŸ˜„">Pick the finale ğŸ’–</button>
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<div class="modal" id="modal">
  <div class="box">
    <button class="closeX" id="closeModal" type="button">âœ•</button>
    <h2 id="modalTitle">ğŸ’œ</h2>
    <p id="modalText"></p>
    <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:14px; flex-wrap:wrap">
      <button class="btn secondary" id="modalOk" type="button">Ok</button>
    </div>
  </div>
</div>

<script>
(function() {
  // ---------- Toast ----------
  const toast = document.getElementById('toast');
  let toastT = null;
  function showToast(html, ms=1800) {
    toast.innerHTML = html;
    toast.style.display = 'block';
    clearTimeout(toastT);
    toastT = setTimeout(()=>toast.style.display='none', ms);
  }

  // ---------- Modal ----------
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalText = document.getElementById('modalText');
  function openModal(title, text) {
    modalTitle.textContent = title;
    modalText.textContent = text;
    modal.style.display = 'grid';
  }
  function closeModal() { modal.style.display='none'; }
  document.getElementById('closeModal').addEventListener('click', closeModal);
  document.getElementById('modalOk').addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

  // ---------- No button dodges ----------
  const qRow = document.getElementById('qRow');
  const noBtn = document.getElementById('noBtn');
  const yesBtn = document.getElementById('yesBtn');
  const hint = document.getElementById('hint');
  const status = document.getElementById('status');
  const attemptsText = document.getElementById('attemptsText');
  let yesClicks = 0;

  function moveNo() {
    const r = qRow.getBoundingClientRect();
    const bw = noBtn.offsetWidth;
    const bh = noBtn.offsetHeight;
    const pad = 6;
    const x = Math.random() * Math.max(0, (r.width - bw - pad*2)) + pad;
    const y = Math.random() * Math.max(0, (r.height - bh - pad*2)) + pad;
    noBtn.style.position = 'absolute';
    noBtn.style.left = x + 'px';
    noBtn.style.top = y + 'px';
  }

  noBtn.addEventListener('mouseenter', moveNo);
  noBtn.addEventListener('click', ()=>{ moveNo(); showToast("<strong>Nope.</strong> Try again ğŸ˜„"); });

  // ---------- Music (WebAudio) ----------
  const musicBtn = document.getElementById('musicBtn');
  let audioCtx = null, isPlaying = false, loopTimer = null;
  const melody = [523.25, 659.25, 783.99, 659.25, 587.33, 659.25, 523.25]; // cute-ish
  function beep(freq, t, dur=0.16, gain=0.04) {
    if(!audioCtx) return;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.value = freq;
    g.gain.value = gain;
    o.connect(g); g.connect(audioCtx.destination);
    o.start(t);
    o.stop(t + dur);
  }
  function startMusic() {
    if(isPlaying) return;
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const base = audioCtx.currentTime + 0.02;
    let i = 0;
    function loop() {
      const t0 = audioCtx.currentTime + 0.02;
      for(let k=0;k<melody.length;k++) {
        beep(melody[k], t0 + k*0.22);
      }
      i++;
      loopTimer = setTimeout(loop, melody.length*220);
    }
    loop();
    isPlaying = true;
    musicBtn.textContent = "â™« Music: On";
    showToast("Music on ğŸ¶");
  }
  function stopMusic() {
    if(loopTimer) clearTimeout(loopTimer);
    loopTimer = null;
    isPlaying = false;
    musicBtn.textContent = "â™« Music: Off";
    showToast("Music off");
  }
  musicBtn.addEventListener('click', async ()=>{
    // iOS/Safari needs a user gesture to start AudioContext.
    try {
      if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      await audioCtx.resume();
    } catch(e) {}
    if(isPlaying) stopMusic(); else startMusic();
  });

  // ---------- Confetti ----------
  const confettiCanvas = document.getElementById('confettiCanvas');
  const cctx = confettiCanvas.getContext('2d');
  function sizeConfetti() {
    const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    confettiCanvas.width = Math.floor(window.innerWidth * dpr);
    confettiCanvas.height = Math.floor(window.innerHeight * dpr);
    cctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener('resize', sizeConfetti);
  sizeConfetti();

  function launchConfetti(duration=2200) {
    confettiCanvas.style.display = 'block';
    const pieces = [];
    const colors = ['#b47cff', '#ff6fb1', '#ffffff', '#ffd1e8', '#d7c7ff'];
    for(let i=0;i<160;i++) {
      pieces.push({
        x: Math.random()*window.innerWidth,
        y: -20 - Math.random()*window.innerHeight*0.3,
        vx: (Math.random()-0.5)*3.0,
        vy: 2 + Math.random()*4.0,
        r: 3 + Math.random()*5,
        a: Math.random()*Math.PI*2,
        va: (Math.random()-0.5)*0.25,
        c: colors[(Math.random()*colors.length)|0],
        s: 0.9 + Math.random()*1.2
      });
    }
    const start = performance.now();
    function tick(now) {
      const t = now - start;
      cctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      for(const p of pieces) {
        p.x += p.vx; p.y += p.vy;
        p.vy *= 0.995; p.vy += 0.02; // gravity
        p.a += p.va;
        cctx.save();
        cctx.translate(p.x, p.y);
        cctx.rotate(p.a);
        cctx.fillStyle = p.c;
        cctx.globalAlpha = 0.95;
        cctx.fillRect(-p.r, -p.r, p.r*2*p.s, p.r*2);
        cctx.restore();
      }
      if(t < duration) requestAnimationFrame(tick);
      else {
        confettiCanvas.style.display='none';
        cctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      }
    }
    requestAnimationFrame(tick);
  }

  // ---------- Yes logic (2 clicks) ----------
  const surpriseBtn = document.getElementById('surpriseBtn');
  const surpriseSection = document.getElementById('surpriseSection');
  const openLetterBtn = document.getElementById('openLetterBtn');
  const letter = document.getElementById('letter');

  yesBtn.addEventListener('click', ()=>{
    yesClicks++;
    if(yesClicks === 1) {
      hint.textContent = "Not yet ğŸ˜Œ Try â€˜Yesâ€™ one more time.";
      attemptsText.textContent = "One more tryâ€¦";
      showToast("Closeâ€¦ one more click ğŸ˜„");
      status.textContent = "Status: Olivia is thinking...";
      // gentle wiggle
      yesBtn.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:420});
      return;
    }
    // Accepted
    status.textContent = "Status: SHE SAID YES ğŸ’–";
    attemptsText.textContent = "Unlocked âœ…";
    hint.textContent = "Perfect choice ğŸ˜Œ";
    launchConfetti();
    showToast("<strong>YES!</strong> I knew you would ğŸ’œ", 2400);
    openModal("ğŸ‰", "Ok Oliviaâ€¦ youâ€™re officially my Valentine.");
    // Reveal surprise controls
    surpriseBtn.style.display = 'inline-flex';
    surpriseSection.style.display = 'block';
    // Scroll a bit to the gallery for effect
    setTimeout(()=>{ document.querySelector('.gallery').scrollIntoView({behavior:'smooth', block:'start'}); }, 350);
  });

  surpriseBtn.addEventListener('click', ()=>{
    surpriseSection.scrollIntoView({behavior:'smooth', block:'start'});
    showToast("Surprise time âœ¨");
  });

  openLetterBtn.addEventListener('click', ()=>{
    letter.style.display = (letter.style.display==='none') ? 'block' : 'none';
    if(letter.style.display==='block') {
      showToast("Letter opened ğŸ’Œ");
      setTimeout(()=>{ letter.scrollIntoView({behavior:'smooth', block:'nearest'}); }, 100);
    } else {
      showToast("Letter closed");
    }
  });

  // Chips inside letter
  document.querySelectorAll('.chip').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const msg = btn.getAttribute('data-msg') || "";
      openModal("ğŸ’œ", msg);
    });
  });

  // ---------- Carousel ----------
  const slides = document.getElementById('slides');
  const thumbs = document.getElementById('thumbs');
  const slideLabel = document.getElementById('slideLabel');
  const total = slides.children.length;

  function setActive(idx) {
    slideLabel.textContent = (idx+1) + " / " + total;
    thumbs.querySelectorAll('.thumb').forEach((t,i)=>t.classList.toggle('active', i===idx));
  }
  function currentIndex() {
    const x = slides.scrollLeft;
    const w = slides.clientWidth;
    return Math.round(x / w);
  }
  slides.addEventListener('scroll', ()=>{
    window.clearTimeout(slides._t);
    slides._t = window.setTimeout(()=>setActive(currentIndex()), 80);
  });
  document.getElementById('prevBtn').addEventListener('click', ()=>{
    slides.scrollBy({left:-slides.clientWidth, behavior:'smooth'});
  });
  document.getElementById('nextBtn').addEventListener('click', ()=>{
    slides.scrollBy({left:slides.clientWidth, behavior:'smooth'});
  });
  thumbs.querySelectorAll('button').forEach(b=>{
    b.addEventListener('click', ()=>{
      const i = parseInt(b.getAttribute('data-i'),10)||0;
      slides.scrollTo({left:i*slides.clientWidth, behavior:'smooth'});
      setActive(i);
    });
  });
  setActive(0);

  // ---------- Background floating hearts (canvas) ----------
  const bg = document.getElementById('bgCanvas');
  const bctx = bg.getContext('2d');
  function sizeBG() {
    const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    bg.width = Math.floor(window.innerWidth * dpr);
    bg.height = Math.floor(window.innerHeight * dpr);
    bctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener('resize', sizeBG);
  sizeBG();

  const particles = [];
  const emojis = ["ğŸ’œ","âœ¨","ğŸ’–","ğŸ«¶","ğŸŒ™"];
  function spawn() {
    particles.push({
      x: Math.random()*window.innerWidth,
      y: window.innerHeight + 20,
      vy: 0.6 + Math.random()*1.4,
      vx: (Math.random()-0.5)*0.6,
      s: 14 + Math.random()*18,
      r: (Math.random()-0.5)*0.6,
      a: 0.35 + Math.random()*0.35,
      e: emojis[(Math.random()*emojis.length)|0]
    });
    if(particles.length > 60) particles.shift();
  }
  let lastSpawn = 0;
  function bgLoop(t) {
    if(t - lastSpawn > 180) { spawn(); lastSpawn = t; }
    bctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    for(const p of particles) {
      p.y -= p.vy;
      p.x += p.vx;
      p.r += 0.01;
      bctx.save();
      bctx.globalAlpha = p.a;
      bctx.translate(p.x, p.y);
      bctx.rotate(p.r);
      bctx.font = p.s + "px system-ui, Apple Color Emoji, Segoe UI Emoji";
      bctx.fillText(p.e, -p.s/2, p.s/2);
      bctx.restore();
    }
    // remove offscreen
    for(let i=particles.length-1;i>=0;i--) {
      if(particles[i].y < -40) particles.splice(i,1);
    }
    requestAnimationFrame(bgLoop);
  }
  requestAnimationFrame(bgLoop);

})();
</script>
</body>
</html>
